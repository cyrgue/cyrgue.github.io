<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Equals et Hashcode | cyrgue</title>
  <meta name="author" content="cyrgue">
  
  <meta name="description" content="GeneralityEquals et Hashode are used for data structure 
Equality
== : Compare the value of 2 expressions
equals : Can be overwritten
l’opérateur == c">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Equals et Hashcode"/>
  <meta property="og:site_name" content="cyrgue"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="cyrgue" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">cyrgue</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-10-17T14:17:14.000Z"><a href="/2018/10/17/java-equals/">2018-10-17</a></time>
      
      
  
    <h1 class="title">Equals et Hashcode</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="Generality"><a href="#Generality" class="headerlink" title="Generality"></a>Generality</h1><p>Equals et Hashode are used for data structure </p>
<h1 id="Equality"><a href="#Equality" class="headerlink" title="Equality"></a>Equality</h1><ul>
<li>== : Compare the <strong>value</strong> of 2 expressions</li>
<li><p>equals : Can be overwritten</p>
<p>l’opérateur == compare les valeurs des types primitifs (int, long, char, etc).<br>Utilisé entre deux objets, ce sont les <strong>adresses des références</strong> qui sont comparées, ce qui implique que l’utilisation de == sur deux instances distinctes sémantiquement équivalentes retournera false. </p>
</li>
</ul>
<p>redéfinir en respectant les règles suivantes : l’implémentation doit être </p>
<ul>
<li>reflexive, </li>
<li>symétrique, </li>
<li>transitive,</li>
<li>cohérente, </li>
</ul>
<p>Method equals()</p>
<ul>
<li><p>Defined in java.lang.Object Class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">this</span> == obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>héritée par tous les objects</p>
</li>
</ul>
<p>Il est nécessaire de redefinir la méthode equals dans les objets pour valider le comportement d’égalité de l’objet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    Student student = (Student) o;</span><br><span class="line">    <span class="keyword">return</span> Objects.equals(firstname, student.firstname) &amp;&amp;</span><br><span class="line">            Objects.equals(lastName, student.lastName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Objects.hash(firstname, lastName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Dans la classe String, <strong>equals</strong> a déjà été redefini, dans StringBuilder non, mais String et StringBuilder sont différents en tant qu’Objet</p>
<p><strong> La majorité des classes java ne redéfinisse pas la méthode equals()</strong><br>Seuls les types immuables redéfinissent la méthode equals() (String, Wrapper de primitive…)</p>
<p>Attention en Java8</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String str1 = <span class="string">"Hello"</span>;</span><br><span class="line">String str2 = <span class="string">"Hello"</span>;</span><br><span class="line"></span><br><span class="line">str1 == stre =&gt; <span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">String str1 = <span class="keyword">new</span> String(<span class="string">"Hello"</span>);</span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="string">"Hello"</span>);</span><br><span class="line"></span><br><span class="line">str1 == stre =&gt; <span class="keyword">false</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">![Equals <span class="keyword">for</span> primitive and Objects](/img/java/oca-javase8/equals.png?raw=<span class="keyword">true</span> <span class="string">"Equals"</span>)   </span><br><span class="line"></span><br><span class="line">## Hashcode</span><br><span class="line"></span><br><span class="line"><span class="function">Valeur de <span class="title">haschage</span> <span class="params">(entier signé de <span class="number">32</span> bits)</span></span></span><br><span class="line"><span class="function">important pour les performances des tables de hashages et structure de données.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Cette valeur de hachage est utilisée par d'autres codes lors du stockage ou de la manipulation de l'instance - les valeurs visent à être réparties de manière homogène pour différentes entrées de manière à être utilisées en agglomération. Cette propriété est importante pour les performances des tables de hachage et autres structures de données qui stockent des objets en <span class="title">groupes</span> <span class="params">(<span class="string">"agglomérats"</span>)</span> en fonction de leurs valeurs de hachage.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">* deux objets pour lesquels la méthode <span class="title">equals</span><span class="params">()</span> renvoie <span class="keyword">true</span> doivent renvoyer la même valeur de hachage</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Ce qu'il se produit ici est que les <span class="title">Hash</span><span class="params">(Map|Set)</span> classent les objets dans un histogramme basé sur le hashCode. A l'instar d'equals, le hashCode par défaut de Hotspot convertit l'adresse en entier et donc retourne des valeurs différentes pour des objets différents. Les méthodes des hash collections utilisent la valeur du hashCode pour localiser un objet dans l'histogramme et si celui-ci ne contient pas cet entier, alors il est considéré que l'objet ne figure pas dans la collection. Deuxième effet kiss kool : puisque deux objets distincts mais sémantiquement égaux ont des hashCode différents, alors ils sont rangés dans des buckets différents impliquant le stockage de doublons, ce qui est en rupture avec le contrat de base du Set.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> redéfinir hashCode de concert avec equals est primordial. Mais qu'est ce que le hashCode ? Simplement une réduction d'un objet sous forme de valeur entière. L'implémentation doit être cohérente avec equals : deux objets égaux doivent présenter le même hashcode, en revanche il n'est pas requis que deux objets ayant le même hashCode soient forcément égaux,</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">```puml</span></span><br><span class="line"><span class="function"> A -&gt; B</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/java/">java</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Commentaires</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://cyrgue.github.io/2018/10/17/java-equals/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Rechercher">
    <input type="hidden" name="q" value="site:cyrgue.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/java/">java</a><small>4</small></li>
  
    <li><a href="/categories/java/java-8/java-9/java-10/">java 10</a><small>1</small></li>
  
    <li><a href="/categories/java/java-8/">java 8</a><small>1</small></li>
  
    <li><a href="/categories/java/java-8/java-9/">java 9</a><small>1</small></li>
  
    <li><a href="/categories/java/oca-javase8-1/">oca-javase8-1</a><small>2</small></li>
  
    <li><a href="/categories/spring/">spring</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Polymorphisme/">Polymorphisme</a><small>1</small></li>
  
    <li><a href="/tags/angular/">angular</a><small>4</small></li>
  
    <li><a href="/tags/angular2/">angular2</a><small>2</small></li>
  
    <li><a href="/tags/angularjs/">angularjs</a><small>1</small></li>
  
    <li><a href="/tags/angularjs2/">angularjs2</a><small>1</small></li>
  
    <li><a href="/tags/architecture/">architecture</a><small>3</small></li>
  
    <li><a href="/tags/array/">array</a><small>1</small></li>
  
    <li><a href="/tags/aws/">aws</a><small>1</small></li>
  
    <li><a href="/tags/branch/">branch</a><small>1</small></li>
  
    <li><a href="/tags/collections/">collections</a><small>1</small></li>
  
    <li><a href="/tags/componant/">componant</a><small>1</small></li>
  
    <li><a href="/tags/composant/">composant</a><small>1</small></li>
  
    <li><a href="/tags/configuration/">configuration</a><small>3</small></li>
  
    <li><a href="/tags/database/">database</a><small>1</small></li>
  
    <li><a href="/tags/design-patterns/">design patterns</a><small>1</small></li>
  
    <li><a href="/tags/directive/">directive</a><small>1</small></li>
  
    <li><a href="/tags/docker/">docker</a><small>1</small></li>
  
    <li><a href="/tags/ecmascript-2015/">ecmascript 2015</a><small>1</small></li>
  
    <li><a href="/tags/environment/">environment</a><small>1</small></li>
  
    <li><a href="/tags/eslint/">eslint</a><small>1</small></li>
  
    <li><a href="/tags/evaluation/">evaluation</a><small>1</small></li>
  
    <li><a href="/tags/exception/">exception</a><small>1</small></li>
  
    <li><a href="/tags/file-I-O/">file I/O</a><small>1</small></li>
  
    <li><a href="/tags/functional-programming/">functional programming</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>2</small></li>
  
    <li><a href="/tags/iframe/">iframe</a><small>1</small></li>
  
    <li><a href="/tags/java/">java</a><small>17</small></li>
  
    <li><a href="/tags/java-definition/">java definition</a><small>1</small></li>
  
    <li><a href="/tags/java-index/">java index</a><small>1</small></li>
  
    <li><a href="/tags/java8/">java8</a><small>5</small></li>
  
    <li><a href="/tags/java9/">java9</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>13</small></li>
  
    <li><a href="/tags/jsbin/">jsbin</a><small>1</small></li>
  
    <li><a href="/tags/lambda/">lambda</a><small>2</small></li>
  
    <li><a href="/tags/library/">library</a><small>1</small></li>
  
    <li><a href="/tags/maven/">maven</a><small>1</small></li>
  
    <li><a href="/tags/ngrx/">ngrx</a><small>1</small></li>
  
    <li><a href="/tags/node/">node</a><small>1</small></li>
  
    <li><a href="/tags/npm/">npm</a><small>1</small></li>
  
    <li><a href="/tags/observable/">observable</a><small>1</small></li>
  
    <li><a href="/tags/programmation-fonctionnelle/">programmation fonctionnelle</a><small>1</small></li>
  
    <li><a href="/tags/rxjs/">rxjs</a><small>1</small></li>
  
    <li><a href="/tags/select/">select</a><small>1</small></li>
  
    <li><a href="/tags/serverless/">serverless</a><small>2</small></li>
  
    <li><a href="/tags/spring/">spring</a><small>1</small></li>
  
    <li><a href="/tags/stream/">stream</a><small>1</small></li>
  
    <li><a href="/tags/strean/">strean</a><small>1</small></li>
  
    <li><a href="/tags/tests/">tests</a><small>1</small></li>
  
    <li><a href="/tags/thread/">thread</a><small>1</small></li>
  
    <li><a href="/tags/time/">time</a><small>1</small></li>
  
    <li><a href="/tags/tools/">tools</a><small>1</small></li>
  
    <li><a href="/tags/web/">web</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
    <div>test</div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2018 cyrgue
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>