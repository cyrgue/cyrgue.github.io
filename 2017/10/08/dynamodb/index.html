<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>DynamoDb | cyrgue</title>
  <meta name="author" content="cyrgue">
  
  <meta name="description" content="Presentation Amazon DynamoDB is a fully managed, cloud-hosted, NoSQL database. It provides fast and predictable performance with the ability to scale ">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="DynamoDb"/>
  <meta property="og:site_name" content="cyrgue"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="cyrgue" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">cyrgue</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-08T13:16:34.000Z"><a href="/2017/10/08/dynamodb/">2017-10-08</a></time>
      
      
  
    <h1 class="title">DynamoDb</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="Presentation"><a href="#Presentation" class="headerlink" title="Presentation"></a>Presentation</h1><p> Amazon DynamoDB is a fully managed, cloud-hosted, NoSQL database.<br> It provides fast and predictable performance with the ability to scale seamlessly.<br> It allows you to store and retrieve any amount of data, serving any level of network traffic without having any operational burden. DynamoDB gives numerous other advantages like consistent and predictable performance, flexible data modeling, and durability.    </p>
<p> DynamoDB uses Solid State Disks (SSD) to store the data </p>
<p> It also automatically replicates the data across other AWS Availability Zones, which provides built-in high availability and reliability</p>
<p> Document Store: MongoDB, CouchDB, MarkLogic<br> Column Store: Hbase, Cassandra<br> Key Value Store: DynamoDB, Azure, Redis<br> Graph Databases: Neo4J, DEX</p>
<h1 id="Tables-Items-and-Attributes"><a href="#Tables-Items-and-Attributes" class="headerlink" title="Tables, Items, and Attributes."></a>Tables, Items, and Attributes.</h1><p> It needs only the fixed primary key, its data type, and a secondary index if needed</p>
<h1 id="Operations"><a href="#Operations" class="headerlink" title="Operations"></a>Operations</h1><p> The Query and Scan operations are used to retrieve information from tables. The Query operation allows us to query the given table with provided hash key and range key. We can also query tables for secondary indexes. </p>
<p> The Scan operation reads all items from a given table. </p>
<h1 id="Primary-key"><a href="#Primary-key" class="headerlink" title="Primary key"></a>Primary key</h1><p> DynamoDB, being a key-value pair database, does not index on all given attributes for a given item;<br> it only indexes on the primary key, which is a mandatory attribute for each item of the table.</p>
<p> having emp_id as the hash key and email as the range key, Mandatory<br> s the primary key, which needs to be unique for each attribute.<br> DynamoDB supports two types of primary keys:</p>
<ul>
<li>Hash primary key : Each DynamoDB table must have a hash primary key that is unique for each item.DynamoDB builds an unordered hash index on this key that allows us to uniquely identify any given item for a given table. So choose an attribute that would have a unique value for each attribute.</li>
<li>Hash and range primary key : Along with the hash key, DynamoDB also supports another primary key called range key, which can be used in combination with the hash key  In this case, DynamoDB created an unordered hash index on the hash key and sorted the range key index on a range key attribute Range key should be selected in such a manner that it will evenly distribute the data load across partitions A good example to choose a hash and range type primary key for the Person table would be choosing birth years as the hash key and SSN as the range key. Here, we can narrow down our search with the birth year and then search in a specific birth year range partition for a specific SSN</li>
</ul>
<h1 id="Secondary-indexes"><a href="#Secondary-indexes" class="headerlink" title="Secondary indexes"></a>Secondary indexes</h1><p> sometimes there might be a need to search and access items from attributes that are not part of the primary key. For all such needs, DynamoDB supports secondary indexes that can be created on attributes other than the primary key and can be accessed and searched in a manner similar to the primary key.<br> We can create multiple secondary indexes for a given table. If we don’t create secondary indexes, the only option to get the item for a certain non-primary key attribute is to scan the complete table, which is a very expensive operation.</p>
<p> DynamoDB supports two types of secondary indexes:</p>
<ul>
<li>Local secondary index</li>
<li><p>Global secondary index</p>
<p>Basically, local secondary indexes give you more range query options other than your table range key attribute. So to define the local secondary index, we can say that it is an index which has the same hash key as a table but a different range key.</p>
<p>aws dynamodb delete-table –table-name messages</p>
<p>findById<br>Forgot password =&gt; findByEmail<br>Login =&gt; findByEmail<br>Authenticate =&gt; findById</p>
<p>Ex</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">usersTable</span>:</span><br><span class="line">  <span class="attribute">Type</span>: <span class="attribute">AWS</span>::<span class="attribute">DynamoDB</span>::Table</span><br><span class="line">  <span class="attribute">Properties</span>:</span><br><span class="line">    <span class="attribute">TableName</span>: Users</span><br><span class="line">    <span class="attribute">AttributeDefinitions</span>:</span><br><span class="line">      - <span class="attribute">AttributeName</span>: id</span><br><span class="line">        <span class="attribute">AttributeType</span>: S</span><br><span class="line">      - <span class="attribute">AttributeName</span>: email</span><br><span class="line">        <span class="attribute">AttributeType</span>: S</span><br><span class="line">      - <span class="attribute">AttributeName</span>: password</span><br><span class="line">        <span class="attribute">AttributeType</span>: S</span><br><span class="line">      - <span class="attribute">AttributeName</span>: salt</span><br><span class="line">        <span class="attribute">AttributeType</span>: S</span><br><span class="line">    <span class="attribute">KeySchema</span>:</span><br><span class="line">      - <span class="attribute">AttributeName</span>: id</span><br><span class="line">        <span class="attribute">KeyType</span>: HASH</span><br><span class="line">    <span class="attribute">ProvisionedThroughput</span>:</span><br><span class="line">      <span class="attribute">ReadCapacityUnits</span>: <span class="number">1</span></span><br><span class="line">      <span class="attribute">WriteCapacityUnits</span>: <span class="number">1</span></span><br><span class="line">    <span class="attribute">GlobalSecondaryIndexes</span>:</span><br><span class="line">      - <span class="attribute">IndexName</span>: UserAuthIndex</span><br><span class="line">        <span class="attribute">KeySchema</span>:</span><br><span class="line">          - <span class="attribute">AttributeName</span>: email</span><br><span class="line">            <span class="attribute">KeyType</span>: HASH</span><br><span class="line">        <span class="attribute">Projection</span>:</span><br><span class="line">          <span class="attribute">NonKeyAttributes</span>:</span><br><span class="line">            - user_id</span><br><span class="line">            - user_organization_id</span><br><span class="line">          <span class="attribute">ProjectionType</span>: INCLUDE</span><br><span class="line">        <span class="attribute">ProvisionedThroughput</span>:</span><br><span class="line">          <span class="attribute">ReadCapacityUnits</span>: <span class="number">1</span></span><br><span class="line">          <span class="attribute">WriteCapacityUnits</span>: <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var params = &#123;</span><br><span class="line">    TableName: <span class="symbol">'articles</span>',</span><br><span class="line">    KeySchema: [ // The <span class="keyword">type</span> <span class="type">of </span><span class="keyword">of</span> schema.  Must start <span class="keyword">with</span> a HASH <span class="keyword">type</span>, <span class="keyword">with</span> an optional second <span class="keyword">RANGE</span>.</span><br><span class="line">        &#123; // Required HASH <span class="keyword">type</span> <span class="type">attribute</span></span><br><span class="line"><span class="type">            </span>AttributeName: <span class="symbol">'id</span>',</span><br><span class="line">            KeyType: <span class="symbol">'HASH</span>',</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; // Optional <span class="keyword">RANGE</span> key <span class="keyword">type</span> <span class="type">for </span>HASH + <span class="keyword">RANGE</span> tables</span><br><span class="line">            AttributeName: <span class="symbol">'event_date_year</span>', </span><br><span class="line">            KeyType: <span class="symbol">'RANGE</span>', </span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    AttributeDefinitions: [ // The names <span class="keyword">and</span> types <span class="keyword">of</span> <span class="keyword">all</span> primary <span class="keyword">and</span> index key attributes only</span><br><span class="line">        &#123;</span><br><span class="line">            AttributeName: <span class="symbol">'id</span>',</span><br><span class="line">            AttributeType: <span class="string">'S'</span>, // (S | N | B) <span class="keyword">for</span> string, number, binary</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            AttributeName: <span class="symbol">'event_date_year</span>',</span><br><span class="line">            AttributeType: <span class="string">'N'</span>, // (S | N | B) <span class="keyword">for</span> string, number, binary</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    ProvisionedThroughput: &#123; // required provisioned throughput <span class="keyword">for</span> the table</span><br><span class="line">        ReadCapacityUnits: <span class="number">1</span>, </span><br><span class="line">        WriteCapacityUnits: <span class="number">1</span>, </span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line">dynamodb.createTable(params, <span class="keyword">function</span>(err, data) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) ppJson(err); // an error occurred</span><br><span class="line">    <span class="keyword">else</span> ppJson(data); // successful response</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="keyword">params</span> = &#123;</span><br><span class="line">    TableName: <span class="string">'articles'</span></span><br><span class="line">    &#125;;</span><br><span class="line">dynamodb.scan(<span class="keyword">params</span>, function(err, <span class="built_in">data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) ppJson(err); <span class="comment">// an error occurred</span></span><br><span class="line">    <span class="keyword">else</span> ppJson(<span class="built_in">data</span>); <span class="comment">// successful response</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><ul>
<li><a href="http://www.markomedia.com.au/dynamodb-for-javascript-cheatsheet/" target="_blank" rel="noopener">http://www.markomedia.com.au/dynamodb-for-javascript-cheatsheet/</a> </li>
<li><a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStarted.NodeJs.03.html" target="_blank" rel="noopener">http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStarted.NodeJs.03.html</a></li>
<li><a href="https://egkatzioura.com/2016/06/23/create-dynamodb-tables-with-node-js/" target="_blank" rel="noopener">https://egkatzioura.com/2016/06/23/create-dynamodb-tables-with-node-js/</a></li>
<li><a href="https://egkatzioura.com/2016/07/02/query-dynamodb-items-with-node-js/" target="_blank" rel="noopener">https://egkatzioura.com/2016/07/02/query-dynamodb-items-with-node-js/</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/aws/">aws</a>, <a href="/tags/database/">database</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Commentaires</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://cyrgue.github.io/2017/10/08/dynamodb/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Rechercher">
    <input type="hidden" name="q" value="site:cyrgue.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/java/">java</a><small>4</small></li>
  
    <li><a href="/categories/java/java-8/java-9/java-10/">java 10</a><small>1</small></li>
  
    <li><a href="/categories/java/java-8/">java 8</a><small>1</small></li>
  
    <li><a href="/categories/java/java-8/java-9/">java 9</a><small>1</small></li>
  
    <li><a href="/categories/java/oca-javase8-1/">oca-javase8-1</a><small>2</small></li>
  
    <li><a href="/categories/spring/">spring</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Polymorphisme/">Polymorphisme</a><small>1</small></li>
  
    <li><a href="/tags/angular/">angular</a><small>4</small></li>
  
    <li><a href="/tags/angular2/">angular2</a><small>2</small></li>
  
    <li><a href="/tags/angularjs/">angularjs</a><small>1</small></li>
  
    <li><a href="/tags/angularjs2/">angularjs2</a><small>1</small></li>
  
    <li><a href="/tags/architecture/">architecture</a><small>2</small></li>
  
    <li><a href="/tags/array/">array</a><small>1</small></li>
  
    <li><a href="/tags/aws/">aws</a><small>1</small></li>
  
    <li><a href="/tags/branch/">branch</a><small>1</small></li>
  
    <li><a href="/tags/collections/">collections</a><small>1</small></li>
  
    <li><a href="/tags/componant/">componant</a><small>1</small></li>
  
    <li><a href="/tags/composant/">composant</a><small>1</small></li>
  
    <li><a href="/tags/configuration/">configuration</a><small>3</small></li>
  
    <li><a href="/tags/database/">database</a><small>1</small></li>
  
    <li><a href="/tags/directive/">directive</a><small>1</small></li>
  
    <li><a href="/tags/docker/">docker</a><small>1</small></li>
  
    <li><a href="/tags/ecmascript-2015/">ecmascript 2015</a><small>1</small></li>
  
    <li><a href="/tags/environment/">environment</a><small>1</small></li>
  
    <li><a href="/tags/eslint/">eslint</a><small>1</small></li>
  
    <li><a href="/tags/evaluation/">evaluation</a><small>1</small></li>
  
    <li><a href="/tags/exception/">exception</a><small>1</small></li>
  
    <li><a href="/tags/file-I-O/">file I/O</a><small>1</small></li>
  
    <li><a href="/tags/functional-programming/">functional programming</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>2</small></li>
  
    <li><a href="/tags/iframe/">iframe</a><small>1</small></li>
  
    <li><a href="/tags/java/">java</a><small>16</small></li>
  
    <li><a href="/tags/java-definition/">java definition</a><small>1</small></li>
  
    <li><a href="/tags/java-index/">java index</a><small>1</small></li>
  
    <li><a href="/tags/java-lambda/">java lambda</a><small>1</small></li>
  
    <li><a href="/tags/java8/">java8</a><small>5</small></li>
  
    <li><a href="/tags/java9/">java9</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>13</small></li>
  
    <li><a href="/tags/jsbin/">jsbin</a><small>1</small></li>
  
    <li><a href="/tags/lambda/">lambda</a><small>1</small></li>
  
    <li><a href="/tags/library/">library</a><small>1</small></li>
  
    <li><a href="/tags/maven/">maven</a><small>1</small></li>
  
    <li><a href="/tags/ngrx/">ngrx</a><small>1</small></li>
  
    <li><a href="/tags/node/">node</a><small>1</small></li>
  
    <li><a href="/tags/npm/">npm</a><small>1</small></li>
  
    <li><a href="/tags/observable/">observable</a><small>1</small></li>
  
    <li><a href="/tags/programmation-fonctionnelle/">programmation fonctionnelle</a><small>1</small></li>
  
    <li><a href="/tags/rxjs/">rxjs</a><small>1</small></li>
  
    <li><a href="/tags/select/">select</a><small>1</small></li>
  
    <li><a href="/tags/serverless/">serverless</a><small>2</small></li>
  
    <li><a href="/tags/spring/">spring</a><small>1</small></li>
  
    <li><a href="/tags/stream/">stream</a><small>1</small></li>
  
    <li><a href="/tags/strean/">strean</a><small>1</small></li>
  
    <li><a href="/tags/tests/">tests</a><small>1</small></li>
  
    <li><a href="/tags/thread/">thread</a><small>1</small></li>
  
    <li><a href="/tags/time/">time</a><small>1</small></li>
  
    <li><a href="/tags/tools/">tools</a><small>1</small></li>
  
    <li><a href="/tags/web/">web</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
    <div>test</div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2018 cyrgue
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>